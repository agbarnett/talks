<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Evidence of statistical ‘hacking’ in clinical prediction models</title>
    <meta charset="utf-8" />
    <meta name="author" content="Adrian Barnett" />
    <meta name="date" content="2023-08-02" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/remark-css/default-fonts.css" rel="stylesheet" />
    <link href="libs/tabwid/tabwid.css" rel="stylesheet" />
    <script src="libs/tabwid/tabwid.js"></script>
  </head>
  <body>
    <textarea id="source">




layout: true
  
---
name: xaringan-title
class: inverse, left, middle

.pull-left[

# .center[Evidence of statistical 'hacking' in clinical prediction models]

### .center[Adrian Barnett (QUT), Nicole White (QUT), Rex Parsons (QUT), Gary Collins (Oxford)]

### .center[2 August 2023]

[<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg> @aidybarnett](http://twitter.com/aidybarnett)  

[<svg aria-hidden="true" role="img" viewBox="0 0 496 512" style="height:1em;width:0.97em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> @agbarnett](http://github.com/agbarnett)  

[<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M192 32c0 17.7 14.3 32 32 32c123.7 0 224 100.3 224 224c0 17.7 14.3 32 32 32s32-14.3 32-32C512 128.9 383.1 0 224 0c-17.7 0-32 14.3-32 32zm0 96c0 17.7 14.3 32 32 32c70.7 0 128 57.3 128 128c0 17.7 14.3 32 32 32s32-14.3 32-32c0-106-86-192-192-192c-17.7 0-32 14.3-32 32zM96 144c0-26.5-21.5-48-48-48S0 117.5 0 144V368c0 79.5 64.5 144 144 144s144-64.5 144-144s-64.5-144-144-144H128v96h16c26.5 0 48 21.5 48 48s-21.5 48-48 48s-48-21.5-48-48V144z"/></svg> Median Watch](https://medianwatch.netlify.app)

[<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M16.1 260.2c-22.6 12.9-20.5 47.3 3.6 57.3L160 376V479.3c0 18.1 14.6 32.7 32.7 32.7c9.7 0 18.9-4.3 25.1-11.8l62-74.3 123.9 51.6c18.9 7.9 40.8-4.5 43.9-24.7l64-416c1.9-12.1-3.4-24.3-13.5-31.2s-23.3-7.5-34-1.4l-448 256zm52.1 25.5L409.7 90.6 190.1 336l1.2 1L68.2 285.7zM403.3 425.4L236.7 355.9 450.8 116.6 403.3 425.4z"/></svg> a.barnett@qut.edu.au](mailto:a.barnett@qut.edu.au)

]


.pull-right[

![](https://media.giphy.com/media/YFigaZwm2EiFG/giphy.gif)

(from giphy)

]

---
background-image: url(figures/AcknowledgementTraditionalOwners.jpg)
background-size: cover

---
class: inverse, center, middle

&lt;!--- what is a clinical prediction model ---&gt;

&lt;img src="figures/cardiac-troponin-ed-pathway.png" width="80%" style="display: block; margin: auto;" /&gt;

---
## Common statistics

### Sensitivity = True positive / (True positive + False negative)

### Specificity = True negative / (True negative + False positive)

---
## Area under curve (AUC)

&lt;img src="slides_files/figure-html/unnamed-chunk-2-1.png" width="50%" style="display: block; margin: auto;" /&gt;

---
## AUC is being used more often

&lt;img src="figures/trend_for_slide.jpg" width="71%" style="display: block; margin: auto;" /&gt;

##### Results from _PubMed_

---
class:inverse
## Previous concerns about clinical prediction models:

* ### Small sample sizes
* ### Inappropriate exclusions
* ### Lack of validation
* ### Poor reporting
* ### Inflated estimates of performance

--

### A review of prediction models for COVID-19 found only 7 of the 606 published models were potentially useful for practice (DOI: [10.1136/bmj.m1328](https://www.bmj.com/content/369/bmj.m1328))

---
.left-column[
# Small sample size
]

.right-column[

&lt;img src="figures/pubmed_22577751.png" width="69%" style="display: block; margin: auto;" /&gt;

]


---
class: inverse
# Spin

* ### "Further, the FPDS biomarker achieved state-of-the-art performance on the mild cognitive impairment (MCI) to DAT conversion prediction task with an AUC of 0.81, 0.80, 0.77 for the 2, 3, 5 years to conversion windows respectively." [PMID29876266](https://pubmed.ncbi.nlm.nih.gov/29876266/)

--

* ### "the result of the ROC Curve area is 0.801, which suggests that our prediction model has good predictive ability and strong stability, so we believe that the model can be generally applied to other groups of people'' [PMID29876266](https://pubmed.ncbi.nlm.nih.gov/29876266/)

--

* ### "Through the SMOTE-Bagged Tree algorithm, the AUC value obtained by our model is 0.80, which proves that our model has a proper prediction ability, and can be used for early breast cancer patients." [PMID31041192](https://pubmed.ncbi.nlm.nih.gov/31041192/)

---
class: center, middle
### Sloppy practice

&lt;img src="figures/frontiers.jpg" width="70%" style="display: block; margin: auto;" /&gt;

---
class:inverse
# Likely results for 1,000 patients

### AUC = sensitivity = specificity = 0.80

### Pre-test probability = 0.05

&lt;div class="tabwid"&gt;&lt;style&gt;.cl-44ed6f50{}.cl-44e36cb2{font-family:'Arial';font-size:22pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(255, 215, 0, 1.00);background-color:transparent;}.cl-44e36cda{font-family:'Arial';font-size:22pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(255, 215, 0, 1.00);background-color:transparent;}.cl-44e7d996{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-44e7d9a0{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-44e7ee90{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0.75pt solid rgba(102, 102, 102, 1.00);border-right: 0.75pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-44e7ee91{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0.75pt solid rgba(102, 102, 102, 1.00);border-right: 0.75pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-44e7ee9a{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0.75pt solid rgba(102, 102, 102, 1.00);border-right: 0.75pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-44e7ee9b{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0.75pt solid rgba(102, 102, 102, 1.00);border-right: 0.75pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}&lt;/style&gt;&lt;table data-quarto-disable-processing='true' class='cl-44ed6f50'&gt;&lt;thead&gt;&lt;tr style="overflow-wrap:break-word;"&gt;&lt;th class="cl-44e7ee90"&gt;&lt;p class="cl-44e7d996"&gt;&lt;span class="cl-44e36cb2"&gt;Test&lt;/span&gt;&lt;/p&gt;&lt;/th&gt;&lt;th class="cl-44e7ee91"&gt;&lt;p class="cl-44e7d9a0"&gt;&lt;span class="cl-44e36cb2"&gt;Diseased&lt;/span&gt;&lt;/p&gt;&lt;/th&gt;&lt;th class="cl-44e7ee91"&gt;&lt;p class="cl-44e7d9a0"&gt;&lt;span class="cl-44e36cb2"&gt;Well&lt;/span&gt;&lt;/p&gt;&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr style="overflow-wrap:break-word;"&gt;&lt;td class="cl-44e7ee9a"&gt;&lt;p class="cl-44e7d996"&gt;&lt;span class="cl-44e36cda"&gt;Positive&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-44e7ee9b"&gt;&lt;p class="cl-44e7d9a0"&gt;&lt;span class="cl-44e36cda"&gt;40&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-44e7ee9b"&gt;&lt;p class="cl-44e7d9a0"&gt;&lt;span class="cl-44e36cda"&gt;190&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr style="overflow-wrap:break-word;"&gt;&lt;td class="cl-44e7ee90"&gt;&lt;p class="cl-44e7d996"&gt;&lt;span class="cl-44e36cda"&gt;Negative&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-44e7ee91"&gt;&lt;p class="cl-44e7d9a0"&gt;&lt;span class="cl-44e36cda"&gt;10&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-44e7ee91"&gt;&lt;p class="cl-44e7d9a0"&gt;&lt;span class="cl-44e36cda"&gt;760&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;

---
# Mass testing

* ### 75% of US men older than 50 years have been screened with prostate-specific antigen (PSA) for prostate cancer

* ### Large follow-up study of over 8,500 men

* ### AUC for test to discriminate any prostate cancer versus no cancer was 0.68 (95% confidence interval 0.67 to 0.69) 

[DOI: 10.1001/jama.294.1.66](https://jamanetwork.com/journals/jama/fullarticle/201171)


---
## Qualitative descriptors for AUC cut-offs

### "An AUC value of more than 0.9 was considered outstanding and 0.8-0.9 as excellent." [PMID35537614](https://pubmed.ncbi.nlm.nih.gov/35537614/)

--

### "An AUC of 0.5 suggests no discrimination, 0.7-0.8 is considered acceptable, more than 0.8-0.9 is considered excellent, and more than 0.9 is considered outstanding.'' [PMID34793687](https://pubmed.ncbi.nlm.nih.gov/34793687/)

--

### "Generally speaking, when the AUC value of a model is at the range of 0.7-0.8, the prediction ability of the model is superior. When the AUC value is at the range of 0.8-0.9, the prediction ability of the model is very good.'' [PMID31041192](https://pubmed.ncbi.nlm.nih.gov/31041192/)

---
class:center,middle

![](https://media.giphy.com/media/RH8Cwr2yWNsmuPCBiO/giphy.gif)

(from Visutrainment on giphy)

---
class:inverse
## P-value hacking at the 0.05 threshold

&lt;img src="figures/Z_plot_slide.png" width="64%" style="display: block; margin: auto;" /&gt;

DOI: [10.1111/stan.12241](https://onlinelibrary.wiley.com/doi/full/10.1111/stan.12241)

---
## Cronbach's alpha hacking

&lt;img src="figures/cronbach.png" width="61%" style="display: block; margin: auto;" /&gt;

DOI: [10.31234/osf.io/dm8xn](https://europepmc.org/article/ppr/ppr612639)


---
class: inverse, centre, middle

# Hypothesis: We will see hacking in clinical prediction models using the AUC values


---
## How to hack a prediction model

Pick best model after ...

* Adding or removing predictors

* Remove "difficult" patients or centres

* Running different methods (e.g., logistic regression, classification tree)

* Trying different random test-validation splits

---
## How to hack a prediction model

&lt;img src="figures/stack_overflow.jpg" width="200%" style="display: block; margin: auto;" /&gt;

---
# Validation

### Algorithm versus 300 manually checked abstracts with MESH term "Area under the curve"

* ### **No AUC**: algorithm correct =  179 / 192 (93%)

* ### **With AUC**: algorithm correct =  100 / 102 (98%)

--

### Easier general sample of 100 manually checked abstracts without MESH term restriction

* ### **No AUC**: algorithm correct =  100 / 100

* ### **With AUC**: algorithm correct =  99 / 100

---
# Validation

&lt;img src="figures/combined_validation.jpg" width="1200" style="display: block; margin: auto;" /&gt;


---

.left-column[
# Challenging presentations
]

.right-column[

&lt;img src="figures/pubmed_35645149.png" width="72%" style="display: block; margin: auto;" /&gt;
]

---
# Validating specific AUC values

&lt;img src="figures/validate_specific.jpg" width="600" style="display: block; margin: auto;" /&gt;


---
# Methods

* ### Group results into bins of (lower, upper] and draw histogram

* ### Lower thresholds of 0.50, 0.51, ..., 0.99; upper threshold +0.01

--

* ### Excluded AUCs of "0.5", "0.6", "0.7", "0.8", "0.9" - create spikes in the histogram due to rounding, also often used as thresholds 

---
# Expected histogram without hacking

&lt;img src="slides_files/figure-html/unnamed-chunk-13-1.png" width="40%" style="display: block; margin: auto;" /&gt;

---
# Expected histogram with hacking

&lt;img src="slides_files/figure-html/unnamed-chunk-14-1.png" width="40%" style="display: block; margin: auto;" /&gt;

--

### Smoothed the histogram using a natural spline with 4 degrees of freedom

---
.left-column[
# Included abstracts
]

.right-column[
&lt;img src="figures/consort.flow.jpg" width="51%" style="display: block; margin: auto;" /&gt;
]

306,888 AUC values

---
# Histogram and residuals

&lt;img src="figures/histogram_residuals_slide.jpg" width="78%" style="display: block; margin: auto;" /&gt;

---
## AUC values from the lower and upper confidence limits

&lt;img src="figures/histogram_residuals_intervals_slide.jpg" width="78%" style="display: block; margin: auto;" /&gt;

---
# Results just for _PLOS ONE_

&lt;img src="figures/histogram_just_plos_slide.jpg" width="74%" style="display: block; margin: auto;" /&gt;

---
# Conclusions

### Hacking has occurred relatively often

* Survey of Australian researchers reported many were aware of instances where colleagues had made up data (10%), altered data (8%), selectively excluded data (27%), or trialed iterative statistical analysis until finding a model that yielded a "significant” result (45%) [DOI: 10.1038/s41562-023-01621-w](https://www.nature.com/articles/s41562-023-01621-w)

--

### Likely some publication bias too

--

### Also uncovered lots of poor practice

### Pre-print here: [https://osf.io/ap6t4](https://osf.io/ap6t4)

---
class: inverse
# Actions needed

* ### Automated peer review checks [DOI: 10.1186/s13104-022-06080-6](https://bmcresnotes.biomedcentral.com/articles/10.1186/s13104-022-06080-6)

--

* ### Wider use (enforcement?) of [TRIPOD](https://www.equator-network.org/reporting-guidelines/tripod-statement/): Transparent reporting of a multivariable prediction model for individual prognosis or diagnosis

--

* ### Courses aimed at non-statisticians

--

* ### Funders should stop funding clinical prediction models unless there is an experienced statistician on the team


---
background-image: url(figures/aimos.jpg)
background-size: cover
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="https://platform.twitter.com/widgets.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"highlightStyle": "dracula",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
